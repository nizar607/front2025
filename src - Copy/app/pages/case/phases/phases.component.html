<!-- START Accordions -->
<accordion class="accordion accordion-border-box  mt-3" [closeOthers]="true" id="accordionlefticon">
  @if(selectedPhasesList.length == 0){
  <div class="container">
    <div class="row d-flex justify-content-center">
      <h3 class="col-12 text-muted text-center mt-3">No Phases Found</h3>
      <img class=" col-2 img-fluid" src="assets/images/no-data.jpg" alt="" style="transform: scale(1.1);">
    </div>
  </div>
  }

  @for (phase of selectedPhasesList; track $index) {
  <accordion-group class="accordion-item mb-2">
    <h2 accordion-heading class="accordion-header" id="accordionlefticonExample1">
      <button class="accordion-button" type="button" data-bs-toggle="collapse"
        data-bs-target="#accor_lefticonExamplecollapse1" aria-expanded="true"
        aria-controls="accor_lefticonExamplecollapse1">
        {{ phase.name }}

        <span class="ms-3 text-muted">
          ({{ phase.startDate | date }}
          <i class="bi bi-arrow-right"></i>
          {{ phase.endDate | date }})
        </span>
      </button>
    </h2>


    <div class="container mt-3 ms-2">

      <div class="row">
        <div class="col-auto">
          <h5 class="text-strong">Description:</h5>
        </div>
        <div class="col-auto ms-auto me-2">


          <button id="add-hearing-btn" class="btn btn-primary" (click)="navigateToCalendar(phase.id)">
            <i class="bi bi-calendar-plus me-2"></i>
            Add Hearing
          </button>

        </div>
      </div>

      <div class="row">

        <p class="col-auto">
          {{ phase.description }}
        </p>

      </div>

    </div>


    <div id="accor_lefticonExamplecollapse1" class="accordion-collapse collapse show">
      <div class="accordion-body">
        <ul class="list-group list">

          @if(!phase.hearings){
          <div class="container">
            <div class="row d-flex justify-content-center">
              <h4 class="col-12 text-muted text-center">No Hearings Found</h4>
              <img class=" col-2 img-fluid" src="assets/images/no-data.jpg" alt="">
            </div>
          </div>
          }
          @else{
          @for (hearing of phase?.hearings; track $index) {
          <li class="list-group-item position-relative">
            <div class="d-flex align-items-center">
              <div class="flex-shrink-0 avatar-xs">
                <div class="avatar-title rounded bg-success-subtle text-success">
                  <i class="bi bi-calendar2-week"></i>
                </div>
              </div>

              <div class="flex-grow-1 ms-2">
                <a href="javascript:void(0);" class="stretched-link text-reset">
                  {{hearing.title}}
                </a>
              </div>

              <div class="flex-shrink-0">
                {{hearing.start | date}}
              </div>

              <button type="button" class="btn btn-close text-primary ms-3" aria-label="Close">
              </button>

            </div>
          </li>
           }
          }

        </ul>
      </div>
    </div>
  </accordion-group>
  }

</accordion>
<!-- END Accordions -->

<!-- deleteRecordModal -->
<div bsModal #deleteRecordModal="bs-modal" id="deleteRecordModal" class="modal fade zoomIn">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" id="deleteRecord-close" (click)="deleteRecordModal.hide()"></button>
      </div>
      <div class="modal-body p-md-5">
        <div class="text-center">
          <div class="text-danger">
            <i class="bi bi-trash display-5"></i>
          </div>
          <div class="mt-4">
            <h4 class="mb-2">Are you sure ?</h4>
            <p class="text-muted mx-3 mb-0">Are you sure you want to remove this record ?</p>
          </div>
        </div>
        <div class="d-flex gap-2 justify-content-center mt-4 pt-2 mb-2">
          <button type="button" class="btn w-sm btn-light btn-hover" (click)="deleteRecordModal.hide()">Close</button>
          <button type="button" class="btn w-sm btn-danger btn-hover" id="delete-record">
            (click)="deleteData(deleteID)"
            Yes, Delete It!
          </button>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /deleteRecordModal -->