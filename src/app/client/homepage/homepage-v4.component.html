
<!-- Admin Controls -->
@if (isAdmin) {
    <div class="admin-controls">
        <button class="btn btn-primary me-2" (click)="toggleEditMode()">
            {{ editingMode ? 'Exit Edit Mode' : 'Edit Homepage' }}
        </button>
        @if (editingMode) {
        <button class="btn btn-success" (click)="saveChanges()">
            Save Changes
        </button>
        }
    </div>
    }
    
<main class="main-content">

<!-- Hero Section -->
<section class="hero" id="home">
    @if (editingMode && isAdmin) {
    <div class="hero-bg-upload image-upload-overlay">
        <button class="btn btn-sm btn-primary" (click)="heroImg.click()">
            Change Background
        </button>
        <input #heroImg type="file" accept="image/*" style="display: none;"
               (change)="onImageUpload($event, 'hero')">
    </div>
    }
    <div class="hero-container">
        <div class="hero-content fade-in">
            <span #heroBadge class="hero-badge" 
                  [contentEditable]="editingMode && isAdmin" 
                  (blur)="updateContent('hero', 'badge', heroBadge.textContent || '')" 
                  (click)="startEditing('hero', 'badge')"
                  [class.editable]="editingMode && isAdmin">
                  {{ content.hero.badge }}
            </span>
            <h1 class="hero-title">
                <span #heroTitlePart1 
                      [contentEditable]="editingMode && isAdmin" 
                      (blur)="updateContent('hero', 'title', heroTitlePart1.textContent || '')" 
                      (click)="startEditing('hero', 'title')"
                      [class.editable]="editingMode && isAdmin">
                      {{ content.hero.title }}
                </span>
                <span #heroTitlePart2 class="highlight" 
                      [contentEditable]="editingMode && isAdmin" 
                      (blur)="updateContent('hero', 'subtitle', heroTitlePart2.textContent || '')" 
                      (click)="startEditing('hero', 'subtitle')"
                      [class.editable]="editingMode && isAdmin">
                      {{ content.hero.subtitle }}
                </span>
            </h1>
            <p #heroDescription class="hero-subtitle" 
               [contentEditable]="editingMode && isAdmin" 
               (blur)="updateContent('hero', 'subtitle', heroDescription.textContent || '')" 
               (click)="startEditing('hero', 'subtitle')"
               [class.editable]="editingMode && isAdmin">
               {{ content.hero.subtitle }}
            </p>
            <div class="hero-actions">
                <a #primaryButton (click)="navigateToArticles()" class="btn-primary" 
                   [contentEditable]="editingMode && isAdmin" 
                   (blur)="updateContent('hero', 'primaryButton', primaryButton.textContent || '')" 
                   (click)="startEditing('hero', 'primaryButton')"
                   [class.editable]="editingMode && isAdmin">
                   {{ content.hero.primaryButton }}
                </a>
                <a #secondaryButton (click)="navigateTo3D()" class="btn-secondary" 
                   [contentEditable]="editingMode && isAdmin" 
                   (blur)="updateContent('hero', 'secondaryButton', secondaryButton.textContent || '')" 
                   (click)="startEditing('hero', 'secondaryButton')"
                   [class.editable]="editingMode && isAdmin">
                    {{ content.hero.secondaryButton }}
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features" id="features">
    <div class="features-container">
        <div class="features-header fade-in">
            <h2 #featuresTitle 
                [contentEditable]="editingMode && isAdmin" 
                (blur)="updateContent('features', 'title', featuresTitle.textContent || '')" 
                (click)="startEditing('features', 'title')"
                [class.editable]="editingMode && isAdmin">
                {{ content.features.title }}
            </h2>
            <p #featuresSubtitle 
               [contentEditable]="editingMode && isAdmin" 
               (blur)="updateContent('features', 'subtitle', featuresSubtitle.textContent || '')" 
               (click)="startEditing('features', 'subtitle')"
               [class.editable]="editingMode && isAdmin">
               {{ content.features.subtitle }}
            </p>
        </div>
        <div class="features-grid">
            <div class="feature-card fade-in">
                <div class="feature-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"/>
                    </svg>
                </div>
                <h3 #feature1Title 
                    [contentEditable]="editingMode && isAdmin" 
                    (blur)="updateContent('features.items.0', 'title', feature1Title.textContent || '')" 
                    (click)="startEditing('features.items.0', 'title')"
                    [class.editable]="editingMode && isAdmin">
                    {{ content.features.items[0].title }}
                </h3>
                <p #feature1Text 
                   [contentEditable]="editingMode && isAdmin" 
                   (blur)="updateContent('features.items.0', 'description', feature1Text.textContent || '')" 
                   (click)="startEditing('features.items.0', 'description')"
                   [class.editable]="editingMode && isAdmin">
                   {{ content.features.items[0].description }}
                </p>
                <a #feature1Link (click)="onFeatureLinkClick('designs')" class="feature-link" 
                   [contentEditable]="editingMode && isAdmin" 
                   (blur)="updateContent('features.items.0', 'link', feature1Link.textContent || '')" 
                   (click)="startEditing('features.items.0', 'link')"
                   [class.editable]="editingMode && isAdmin">
                    {{ content.features.items[0].link }}
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                </a>
            </div>
            <div class="feature-card fade-in">
                <div class="feature-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <h3 #feature2Title 
                    [contentEditable]="editingMode && isAdmin" 
                    (blur)="updateContent('features.items.1', 'title', feature2Title.textContent || '')" 
                    (click)="startEditing('features.items.1', 'title')"
                    [class.editable]="editingMode && isAdmin">
                    {{ content.features.items[1].title }}
                </h3>
                <p #feature2Text 
                   [contentEditable]="editingMode && isAdmin" 
                   (blur)="updateContent('features.items.1', 'description', feature2Text.textContent || '')" 
                   (click)="startEditing('features.items.1', 'description')"
                   [class.editable]="editingMode && isAdmin">
                   {{ content.features.items[1].description }}
                </p>
                <a #feature2Link (click)="onFeatureLinkClick('quality')" class="feature-link" 
                   [contentEditable]="editingMode && isAdmin" 
                   (blur)="updateContent('features.items.1', 'link', feature2Link.textContent || '')" 
                   (click)="startEditing('features.items.1', 'link')"
                   [class.editable]="editingMode && isAdmin">
                    {{ content.features.items[1].link }}
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                </a>
            </div>
            <div class="feature-card fade-in">
                <div class="feature-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                    </svg>
                </div>
                <h3 #feature3Title 
                    [contentEditable]="editingMode && isAdmin" 
                    (blur)="updateContent('features.items.2', 'title', feature3Title.textContent || '')" 
                    (click)="startEditing('features.items.2', 'title')"
                    [class.editable]="editingMode && isAdmin">
                    {{ content.features.items[2].title }}
                </h3>
                <p #feature3Text 
                   [contentEditable]="editingMode && isAdmin" 
                   (blur)="updateContent('features.items.2', 'description', feature3Text.textContent || '')" 
                   (click)="startEditing('features.items.2', 'description')"
                   [class.editable]="editingMode && isAdmin">
                   {{ content.features.items[2].description }}
                </p>
                <a #feature3Link (click)="onFeatureLinkClick('sustainability')" class="feature-link" 
                   [contentEditable]="editingMode && isAdmin" 
                   (blur)="updateContent('features.items.2', 'link', feature3Link.textContent || '')" 
                   (click)="startEditing('features.items.2', 'link')"
                   [class.editable]="editingMode && isAdmin">
                    {{ content.features.items[2].link }}
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Products Section -->
<section class="products" id="products">
    <div class="products-container">
        <div class="products-header fade-in">
            <h2 #productsTitle 
                [contentEditable]="editingMode && isAdmin" 
                (blur)="updateContent('products', 'title', productsTitle.textContent || '')" 
                (click)="startEditing('products', 'title')"
                [class.editable]="editingMode && isAdmin">
                {{ content.products.title }}
            </h2>
            <div class="products-nav">
                <button class="product-nav-btn active" data-category="all">All</button>
                <button class="product-nav-btn" data-category="living">Living Room</button>
                <button class="product-nav-btn" data-category="bedroom">Bedroom</button>
                <button class="product-nav-btn" data-category="dining">Dining</button>
            </div>
        </div>
        <div class="products-grid">
            <div class="product-card fade-in living" data-category="living">
                <div class="product-image">
                    <img [src]="content.products.items[0].image" alt="Modern Sofa">
                    @if (editingMode && isAdmin) {
                    <div class="image-upload-overlay">
                        <button class="btn btn-sm btn-primary" (click)="productImg0.click()">
                            Change Image
                        </button>
                        <input #productImg0 type="file" accept="image/*" style="display: none;"
                               (change)="onImageUpload($event, 'products', 0)">
                    </div>
                    }
                    <div #product1Badge class="product-badge" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.0', 'badge', product1Badge.textContent || '')" 
                         (click)="startEditing('products.items.0', 'badge')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[0].badge }}
                    </div>
                </div>
                <div class="product-info">
                    <div #product1Category class="product-category" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.0', 'category', product1Category.textContent || '')" 
                         (click)="startEditing('products.items.0', 'category')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[0].category }}
                    </div>
                    <h3 #product1Name class="product-name" 
                        [contentEditable]="editingMode && isAdmin" 
                        (blur)="updateContent('products.items.0', 'name', product1Name.textContent || '')" 
                        (click)="startEditing('products.items.0', 'name')"
                        [class.editable]="editingMode && isAdmin">
                        {{ content.products.items[0].name }}
                    </h3>
                    <div #product1Price class="product-price" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.0', 'price', product1Price.textContent || '')" 
                         (click)="startEditing('products.items.0', 'price')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[0].price }}
                    </div>
                    <button #product1Button class="product-btn" 
                            [contentEditable]="editingMode && isAdmin" 
                            (blur)="updateContent('products.items.0', 'buttonText', product1Button.textContent || '')" 
                            (click)="startEditing('products.items.0', 'buttonText')"
                            [class.editable]="editingMode && isAdmin">
                            {{ content.products.items[0].buttonText }}
                    </button>
                </div>
            </div>
            
            <div class="product-card fade-in bedroom" data-category="bedroom">
                <div class="product-image">
                    <img [src]="content.products.items[1].image" alt="Platform Bed">
                    @if (editingMode && isAdmin) {
                    <div class="image-upload-overlay">
                        <button class="btn btn-sm btn-primary" (click)="productImg1.click()">
                            Change Image
                        </button>
                        <input #productImg1 type="file" accept="image/*" style="display: none;"
                               (change)="onImageUpload($event, 'products', 1)">
                    </div>
                    }
                    <div #product2Badge class="product-badge" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.1', 'badge', product2Badge.textContent || '')" 
                         (click)="startEditing('products.items.1', 'badge')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[1].badge }}
                    </div>
                </div>
                <div class="product-info">
                    <div #product2Category class="product-category" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.1', 'category', product2Category.textContent || '')" 
                         (click)="startEditing('products.items.1', 'category')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[1].category }}
                    </div>
                    <h3 #product2Name class="product-name" 
                        [contentEditable]="editingMode && isAdmin" 
                        (blur)="updateContent('products.items.1', 'name', product2Name.textContent || '')" 
                        (click)="startEditing('products.items.1', 'name')"
                        [class.editable]="editingMode && isAdmin">
                        {{ content.products.items[1].name }}
                    </h3>
                    <div #product2Price class="product-price" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.1', 'price', product2Price.textContent || '')" 
                         (click)="startEditing('products.items.1', 'price')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[1].price }}
                    </div>
                    <button #product2Button class="product-btn" 
                            [contentEditable]="editingMode && isAdmin" 
                            (blur)="updateContent('products.items.1', 'buttonText', product2Button.textContent || '')" 
                            (click)="startEditing('products.items.1', 'buttonText')"
                            [class.editable]="editingMode && isAdmin">
                            {{ content.products.items[1].buttonText }}
                    </button>
                </div>
            </div>
            
            <div class="product-card fade-in dining" data-category="dining">
                <div class="product-image">
                    <img [src]="content.products.items[2].image" alt="Dining Table">
                    @if (editingMode && isAdmin) {
                    <div class="image-upload-overlay">
                        <button class="btn btn-sm btn-primary" (click)="productImg2.click()">
                            Change Image
                        </button>
                        <input #productImg2 type="file" accept="image/*" style="display: none;"
                               (change)="onImageUpload($event, 'products', 2)">
                    </div>
                    }
                    <div #product3Badge class="product-badge" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.2', 'badge', product3Badge.textContent || '')" 
                         (click)="startEditing('products.items.2', 'badge')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[2].badge }}
                    </div>
                </div>
                <div class="product-info">
                    <div #product3Category class="product-category" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.2', 'category', product3Category.textContent || '')" 
                         (click)="startEditing('products.items.2', 'category')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[2].category }}
                    </div>
                    <h3 #product3Name class="product-name" 
                        [contentEditable]="editingMode && isAdmin" 
                        (blur)="updateContent('products.items.2', 'name', product3Name.textContent || '')" 
                        (click)="startEditing('products.items.2', 'name')"
                        [class.editable]="editingMode && isAdmin">
                        {{ content.products.items[2].name }}
                    </h3>
                    <div #product3Price class="product-price" 
                         [contentEditable]="editingMode && isAdmin" 
                         (blur)="updateContent('products.items.2', 'price', product3Price.textContent || '')" 
                         (click)="startEditing('products.items.2', 'price')"
                         [class.editable]="editingMode && isAdmin">
                         {{ content.products.items[2].price }}
                    </div>
                    <button #product3Button class="product-btn" 
                            [contentEditable]="editingMode && isAdmin" 
                            (blur)="updateContent('products.items.2', 'buttonText', product3Button.textContent || '')" 
                            (click)="startEditing('products.items.2', 'buttonText')"
                            [class.editable]="editingMode && isAdmin">
                            {{ content.products.items[2].buttonText }}
                    </button>
                </div>
            </div>
            
            <div class="product-card fade-in living" data-category="living">
                <div class="product-image" [class.editing]="editingMode && isAdmin">
                    <img [src]="content.products.items[3]?.image || 'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'" alt="Coffee Table">
                    @if (editingMode && isAdmin) {
                    <div class="image-upload-overlay">
                        <button class="btn btn-sm btn-primary" (click)="productImg3.click()">
                            Change Image
                        </button>
                        <input #productImg3 type="file" accept="image/*" style="display: none;"
                               (change)="onImageUpload($event, 'products', 3)">
                    </div>
                    }
                </div>
                <div class="product-info">
                    <div #product4Category class="product-category" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.3', 'category', product4Category.textContent || '')" (click)="startEditing('products.items.3', 'category')" [class.editable]="editingMode && isAdmin">{{content.products.items[3]?.category || 'Living Room'}}</div>
                    <h3 #product4Name class="product-name" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.3', 'name', product4Name.textContent || '')" (click)="startEditing('products.items.3', 'name')" [class.editable]="editingMode && isAdmin">{{content.products.items[3]?.name || 'Glass Coffee Table'}}</h3>
                    <div #product4Price class="product-price" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.3', 'price', product4Price.textContent || '')" (click)="startEditing('products.items.3', 'price')" [class.editable]="editingMode && isAdmin">{{content.products.items[3]?.price || '$899'}}</div>
                    <button #product4Button class="product-btn" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.3', 'buttonText', product4Button.textContent || '')" (click)="startEditing('products.items.3', 'buttonText')" [class.editable]="editingMode && isAdmin">{{content.products.items[3]?.buttonText || 'Add to Cart'}}</button>
                </div>
            </div>
            
            <div class="product-card fade-in bedroom" data-category="bedroom">
                <div class="product-image" [class.editing]="editingMode && isAdmin">
                    <img [src]="content.products.items[4]?.image || 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'" alt="Nightstand">
                    @if (editingMode && isAdmin) {
                    <div class="image-upload-overlay">
                        <button class="btn btn-sm btn-primary" (click)="productImg4.click()">
                            Change Image
                        </button>
                        <input #productImg4 type="file" accept="image/*" style="display: none;"
                               (change)="onImageUpload($event, 'products', 4)">
                    </div>
                    }
                </div>
                <div class="product-info">
                    <div #product5Category class="product-category" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.4', 'category', product5Category.textContent || '')" (click)="startEditing('products.items.4', 'category')" [class.editable]="editingMode && isAdmin">{{content.products.items[4]?.category || 'Bedroom'}}</div>
                    <h3 #product5Name class="product-name" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.4', 'name', product5Name.textContent || '')" (click)="startEditing('products.items.4', 'name')" [class.editable]="editingMode && isAdmin">{{content.products.items[4]?.name || 'Modern Nightstand'}}</h3>
                    <div #product5Price class="product-price" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.4', 'price', product5Price.textContent || '')" (click)="startEditing('products.items.4', 'price')" [class.editable]="editingMode && isAdmin">{{content.products.items[4]?.price || '$449'}}</div>
                    <button #product5Button class="product-btn" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.4', 'buttonText', product5Button.textContent || '')" (click)="startEditing('products.items.4', 'buttonText')" [class.editable]="editingMode && isAdmin">{{content.products.items[4]?.buttonText || 'Add to Cart'}}</button>
                </div>
            </div>
            
            <div class="product-card fade-in dining" data-category="dining">
                <div class="product-image" [class.editing]="editingMode && isAdmin">
                    <img [src]="content.products.items[5]?.image || 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'" alt="Dining Chairs">
                    @if (editingMode && isAdmin) {
                    <div class="image-upload-overlay">
                        <button class="btn btn-sm btn-primary" (click)="productImg5.click()">
                            Change Image
                        </button>
                        <input #productImg5 type="file" accept="image/*" style="display: none;"
                               (change)="onImageUpload($event, 'products', 5)">
                    </div>
                    }
                </div>
                <div class="product-info">
                    <div #product6Category class="product-category" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.5', 'category', product6Category.textContent || '')" (click)="startEditing('products.items.5', 'category')" [class.editable]="editingMode && isAdmin">{{content.products.items[5]?.category || 'Dining'}}</div>
                    <h3 #product6Name class="product-name" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.5', 'name', product6Name.textContent || '')" (click)="startEditing('products.items.5', 'name')" [class.editable]="editingMode && isAdmin">{{content.products.items[5]?.name || 'Designer Dining Chairs'}}</h3>
                    <div #product6Price class="product-price" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.5', 'price', product6Price.textContent || '')" (click)="startEditing('products.items.5', 'price')" [class.editable]="editingMode && isAdmin">{{content.products.items[5]?.price || '$299'}}</div>
                    <button #product6Button class="product-btn" [contentEditable]="editingMode && isAdmin" (blur)="updateContent('products.items.5', 'buttonText', product6Button.textContent || '')" (click)="startEditing('products.items.5', 'buttonText')" [class.editable]="editingMode && isAdmin">{{content.products.items[5]?.buttonText || 'Add to Cart'}}</button>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Newsletter -->
<section class="newsletter">
    <div class="newsletter-container fade-in">
        <h2 #newsletterTitle [contentEditable]="editingMode && isAdmin" (blur)="updateContent('newsletter', 'title', newsletterTitle.textContent || '')" (click)="startEditing('newsletter', 'title')" [class.editable]="editingMode && isAdmin">{{content.newsletter?.title || 'Stay Updated'}}</h2>
        <p #newsletterText [contentEditable]="editingMode && isAdmin" (blur)="updateContent('newsletter', 'text', newsletterText.textContent || '')" (click)="startEditing('newsletter', 'text')" [class.editable]="editingMode && isAdmin">{{content.newsletter?.text || 'Get the latest updates on new collections, exclusive offers, and design inspiration delivered to your inbox.'}}</p>
        <form class="newsletter-form">
            <input type="email" class="newsletter-input" placeholder="Enter your email address" required>
            <button type="submit" class="newsletter-btn">Subscribe</button>
        </form>
    </div>
</section>

</main>

